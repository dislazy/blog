{"title":"MySQL线上语句标准格式","slug":"MySQL线上语句标准格式","date":"2018-10-10T07:39:28.000Z","updated":"2022-06-02T01:05:59.614Z","comments":true,"path":"api/articles/MySQL线上语句标准格式.json","excerpt":"CREATE DATABASE标准SQL1<br>2<br>3<br>4<br>5<br><br>SET NAMES UTF8;<br><br>CREATE DATABASE example_db DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; #collate建议使用utf8-bin<br><br>","covers":null,"content":"<h3 id=\"CREATE-DATABASE标准SQL\"><a href=\"#CREATE-DATABASE标准SQL\" class=\"headerlink\" title=\"CREATE DATABASE标准SQL\"></a>CREATE DATABASE标准SQL</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">SET NAMES UTF8;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE DATABASE example_db DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; #collate建议使用utf8-bin</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"CREATE-TABLE标准SQL\"><a href=\"#CREATE-TABLE标准SQL\" class=\"headerlink\" title=\"CREATE TABLE标准SQL\"></a>CREATE TABLE标准SQL</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">SET NAMES UTF8;</span><br><span class=\"line\"></span><br><span class=\"line\">DROP TABLE IF EXISTS example_db.example;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE example_db.example(   #常规字段为 int,bigint,varchar,text,tinyint</span><br><span class=\"line\"></span><br><span class=\"line\">`id` int(10) UNSIGNED NOT NULL COMMENT &#x27;comment&#x27; AUTO_INCREMENT,</span><br><span class=\"line\"></span><br><span class=\"line\">`account_id` bigint(20) UNSIGNED NOT NULL DEFAULT 0 COMMENT &#x27;comment&#x27;,</span><br><span class=\"line\">                         </span><br><span class=\"line\">`telephone` bigint(20) UNSIGNED NOT NULL DEFAULT 0 COMMENT &#x27;comment&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">`card_amount` bigint(20) UNSIGNED NOT NULL DEFAULT 0 COMMENT &#x27;comment&#x27;,          #涉及到金额的，请使用bigint，单位为分</span><br><span class=\"line\">                 </span><br><span class=\"line\">`name` varchar(5) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;comment&#x27;,                         #varchar字段，建议使用长度5,30,50,100,255,500,1000,5000</span><br><span class=\"line\"></span><br><span class=\"line\">`desc` varchar(30) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;comment&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">`info` varchar(50) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;comment&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">`addr` varchar(100) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;comment&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">`json` text NOT NULL COMMENT &#x27;comment&#x27;,                                          #存储json格式字段</span><br><span class=\"line\"></span><br><span class=\"line\">`status` tinyint(1) UNSIGNED NOT NULL DEFAULT 1 COMMENT &#x27;comment&#x27;,               #1为正常数据，0为删除数据</span><br><span class=\"line\"></span><br><span class=\"line\">`create_time`  datetime default now() comment &#x27;创建时间&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">`update_time`  datetime default now() comment &#x27;更新时间&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">PRIMARY KEY `idx_id` (`id`),                                                     #主键，请合理选择</span><br><span class=\"line\"></span><br><span class=\"line\">KEY `idx_user_name` (`name`)                                                     #请加必要的业务相关索引，命名规则为idx_field1_field2</span><br><span class=\"line\"></span><br><span class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT &#x27;comment&#x27;; </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"INSERT-amp-UPDATE标准SQL\"><a href=\"#INSERT-amp-UPDATE标准SQL\" class=\"headerlink\" title=\"INSERT&amp;UPDATE标准SQL\"></a>INSERT&amp;UPDATE标准SQL</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">SET NAMES UTF8;</span><br><span class=\"line\"></span><br><span class=\"line\">INSERT INTO example (iIntID,sVar0,sVar1,sVar2) VALUES (1,&#x27;中国&#x27;,&#x27;上海&#x27;,&#x27;浦东&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">UPDATE example SET iStatus =  0, type = 1 WHERE iAutoID = 1;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改表结构标准SQL\"><a href=\"#修改表结构标准SQL\" class=\"headerlink\" title=\"修改表结构标准SQL\"></a>修改表结构标准SQL</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">ALTER TABLE example_db.example</span><br><span class=\"line\"></span><br><span class=\"line\">ADD COLUMN sMobilePhone VARCHAR(30) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;手机号码&#x27; AFTER create_time;     #建议指定新加column的位置</span><br><span class=\"line\"></span><br><span class=\"line\">ALTER TABLE example_db.example</span><br><span class=\"line\"></span><br><span class=\"line\">CHANGE COLUMN smobilePhone sMobilePhone VARCHAR(50) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;手机号码&#x27;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"增加索引\"><a href=\"#增加索引\" class=\"headerlink\" title=\"增加索引\"></a>增加索引</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE example_db.example ADD INDEX idx_name(name);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除表字段\"><a href=\"#删除表字段\" class=\"headerlink\" title=\"删除表字段\"></a>删除表字段</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE products DROP COLUMN description;</span><br></pre></td></tr></table></figure>\n\n","more":"\n\n<h3 id=\"CREATE-TABLE标准SQL\"><a href=\"#CREATE-TABLE标准SQL\" class=\"headerlink\" title=\"CREATE TABLE标准SQL\"></a>CREATE TABLE标准SQL</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">SET NAMES UTF8;</span><br><span class=\"line\"></span><br><span class=\"line\">DROP TABLE IF EXISTS example_db.example;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE example_db.example(   #常规字段为 int,bigint,varchar,text,tinyint</span><br><span class=\"line\"></span><br><span class=\"line\">`id` int(10) UNSIGNED NOT NULL COMMENT &#x27;comment&#x27; AUTO_INCREMENT,</span><br><span class=\"line\"></span><br><span class=\"line\">`account_id` bigint(20) UNSIGNED NOT NULL DEFAULT 0 COMMENT &#x27;comment&#x27;,</span><br><span class=\"line\">                         </span><br><span class=\"line\">`telephone` bigint(20) UNSIGNED NOT NULL DEFAULT 0 COMMENT &#x27;comment&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">`card_amount` bigint(20) UNSIGNED NOT NULL DEFAULT 0 COMMENT &#x27;comment&#x27;,          #涉及到金额的，请使用bigint，单位为分</span><br><span class=\"line\">                 </span><br><span class=\"line\">`name` varchar(5) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;comment&#x27;,                         #varchar字段，建议使用长度5,30,50,100,255,500,1000,5000</span><br><span class=\"line\"></span><br><span class=\"line\">`desc` varchar(30) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;comment&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">`info` varchar(50) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;comment&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">`addr` varchar(100) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;comment&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">`json` text NOT NULL COMMENT &#x27;comment&#x27;,                                          #存储json格式字段</span><br><span class=\"line\"></span><br><span class=\"line\">`status` tinyint(1) UNSIGNED NOT NULL DEFAULT 1 COMMENT &#x27;comment&#x27;,               #1为正常数据，0为删除数据</span><br><span class=\"line\"></span><br><span class=\"line\">`create_time`  datetime default now() comment &#x27;创建时间&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">`update_time`  datetime default now() comment &#x27;更新时间&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">PRIMARY KEY `idx_id` (`id`),                                                     #主键，请合理选择</span><br><span class=\"line\"></span><br><span class=\"line\">KEY `idx_user_name` (`name`)                                                     #请加必要的业务相关索引，命名规则为idx_field1_field2</span><br><span class=\"line\"></span><br><span class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT &#x27;comment&#x27;; </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"INSERT-amp-UPDATE标准SQL\"><a href=\"#INSERT-amp-UPDATE标准SQL\" class=\"headerlink\" title=\"INSERT&amp;UPDATE标准SQL\"></a>INSERT&amp;UPDATE标准SQL</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">SET NAMES UTF8;</span><br><span class=\"line\"></span><br><span class=\"line\">INSERT INTO example (iIntID,sVar0,sVar1,sVar2) VALUES (1,&#x27;中国&#x27;,&#x27;上海&#x27;,&#x27;浦东&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">UPDATE example SET iStatus =  0, type = 1 WHERE iAutoID = 1;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改表结构标准SQL\"><a href=\"#修改表结构标准SQL\" class=\"headerlink\" title=\"修改表结构标准SQL\"></a>修改表结构标准SQL</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">ALTER TABLE example_db.example</span><br><span class=\"line\"></span><br><span class=\"line\">ADD COLUMN sMobilePhone VARCHAR(30) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;手机号码&#x27; AFTER create_time;     #建议指定新加column的位置</span><br><span class=\"line\"></span><br><span class=\"line\">ALTER TABLE example_db.example</span><br><span class=\"line\"></span><br><span class=\"line\">CHANGE COLUMN smobilePhone sMobilePhone VARCHAR(50) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;手机号码&#x27;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"增加索引\"><a href=\"#增加索引\" class=\"headerlink\" title=\"增加索引\"></a>增加索引</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE example_db.example ADD INDEX idx_name(name);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除表字段\"><a href=\"#删除表字段\" class=\"headerlink\" title=\"删除表字段\"></a>删除表字段</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE products DROP COLUMN description;</span><br></pre></td></tr></table></figure>\n\n","categories":[{"name":"研发规范","path":"api/categories/研发规范.json"}],"tags":[{"name":"mysql","path":"api/tags/mysql.json"}]}