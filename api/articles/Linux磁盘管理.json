{"title":"Linux磁盘管理","slug":"Linux磁盘管理","date":"2018-12-03T14:06:39.000Z","updated":"2022-06-02T01:05:59.613Z","comments":true,"path":"api/articles/Linux磁盘管理.json","excerpt":"Linux磁盘管理好坏直接关系到整个系统的性能问题。Linux磁盘管理常用三个命令为df、du和fdisk。","covers":null,"content":"<p>Linux磁盘管理好坏直接关系到整个系统的性能问题。</p>\n<p>Linux磁盘管理常用三个命令为df、du和fdisk。</p>\n<p>df：列出文件系统的整体磁盘使用量<br>du：检查磁盘空间使用量<br>fdisk：用于磁盘分区</p>\n<h3 id=\"df\"><a href=\"#df\" class=\"headerlink\" title=\"df\"></a>df</h3><p>Linux磁盘管理好坏直接关系到整个系统的性能问题。</p>\n<p>Linux磁盘管理常用三个命令为df、du和fdisk。</p>\n<ul>\n<li>df：列出文件系统的整体磁盘使用量</li>\n<li>du：检查磁盘空间使用量</li>\n<li>fdisk：用于磁盘分区</li>\n</ul>\n<h3 id=\"df命令\"><a href=\"#df命令\" class=\"headerlink\" title=\"df命令\"></a>df命令</h3><p>df命令参数功能：检查文件系统的磁盘空间占用情况。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息。</p>\n<p>语法：</p>\n<p><code>df [-ahikHTm] [目录或文件名]</code><br>选项与参数：</p>\n<ul>\n<li>a ：列出所有的文件系统，包括系统特有的 &#x2F;proc 等文件系统；</li>\n<li>k ：以 KBytes 的容量显示各文件系统；</li>\n<li>m ：以 MBytes 的容量显示各文件系统；</li>\n<li>h ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；</li>\n<li>H ：以 M&#x3D;1000K 取代 M&#x3D;1024K 的进位方式；</li>\n<li>T ：显示文件系统类型, 连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；</li>\n<li>i ：不用硬盘容量，而以 inode 的数量来显示<h3 id=\"实例-1\"><a href=\"#实例-1\" class=\"headerlink\" title=\"实例 1\"></a>实例 1</h3></li>\n</ul>\n<p>将系统内所有的文件系统列出来！</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# df</span><br><span class=\"line\">Filesystem      1K-blocks      Used Available Use% Mounted on</span><br><span class=\"line\">/dev/hdc2         9920624   3823112   5585444  41% /</span><br><span class=\"line\">/dev/hdc3         4956316    141376   4559108   4% /home</span><br><span class=\"line\">/dev/hdc1          101086     11126     84741  12% /boot</span><br><span class=\"line\">tmpfs              371332         0    371332   0% /dev/shm</span><br></pre></td></tr></table></figure>\n<p>在 Linux 底下如果 df 没有加任何选项，那么默认会将系统内所有的 (不含特殊内存内的文件系统与 swap) 都以 1 Kbytes 的容量来列出来！</p>\n<h4 id=\"实例-2\"><a href=\"#实例-2\" class=\"headerlink\" title=\"实例 2\"></a>实例 2</h4><p>将容量结果以易读的容量格式显示出来</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# df -h</span><br><span class=\"line\">Filesystem            Size  Used Avail Use% Mounted on</span><br><span class=\"line\">/dev/hdc2             9.5G  3.7G  5.4G  41% /</span><br><span class=\"line\">/dev/hdc3             4.8G  139M  4.4G   4% /home</span><br><span class=\"line\">/dev/hdc1              99M   11M   83M  12% /boot</span><br><span class=\"line\">tmpfs                 363M     0  363M   0% /dev/shm</span><br></pre></td></tr></table></figure>\n<h4 id=\"实例-3\"><a href=\"#实例-3\" class=\"headerlink\" title=\"实例 3\"></a>实例 3</h4><p>将系统内的所有特殊文件格式及名称都列出来</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# df -aT</span><br><span class=\"line\">Filesystem    Type 1K-blocks    Used Available Use% Mounted on</span><br><span class=\"line\">/dev/hdc2     ext3   9920624 3823112   5585444  41% /</span><br><span class=\"line\">proc          proc         0       0         0   -  /proc</span><br><span class=\"line\">sysfs        sysfs         0       0         0   -  /sys</span><br><span class=\"line\">devpts      devpts         0       0         0   -  /dev/pts</span><br><span class=\"line\">/dev/hdc3     ext3   4956316  141376   4559108   4% /home</span><br><span class=\"line\">/dev/hdc1     ext3    101086   11126     84741  12% /boot</span><br><span class=\"line\">tmpfs        tmpfs    371332       0    371332   0% /dev/shm</span><br><span class=\"line\">none   binfmt_misc         0       0         0   -  /proc/sys/fs/binfmt_misc</span><br><span class=\"line\">sunrpc  rpc_pipefs         0       0         0   -  /var/lib/nfs/rpc_pipefs</span><br></pre></td></tr></table></figure>\n<h4 id=\"实例-4\"><a href=\"#实例-4\" class=\"headerlink\" title=\"实例 4\"></a>实例 4</h4><p>将 &#x2F;etc 底下的可用的磁盘容量以易读的容量格式显示</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# df -h /etc</span><br><span class=\"line\">Filesystem            Size  Used Avail Use% Mounted on</span><br><span class=\"line\">/dev/hdc2             9.5G  3.7G  5.4G  41% /</span><br></pre></td></tr></table></figure>\n<h3 id=\"du命令\"><a href=\"#du命令\" class=\"headerlink\" title=\"du命令\"></a>du命令</h3><p>Linux du命令也是查看使用空间的，但是与df命令不同的是Linux du命令是对文件和目录磁盘使用的空间的查看，还是和df命令有一些区别的，这里介绍Linux du命令。</p>\n<p>语法：</p>\n<p><code>du [-ahskm] 文件或目录名称</code></p>\n<p>选项与参数：</p>\n<ul>\n<li>a ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。</li>\n<li>h ：以人们较易读的容量格式 (G&#x2F;M) 显示；</li>\n<li>s ：列出总量而已，而不列出每个各别的目录占用容量；</li>\n<li>S ：不包括子目录下的总计，与 -s 有点差别。</li>\n<li>k ：以 KBytes 列出容量显示；</li>\n<li>m ：以 MBytes 列出容量显示；</li>\n</ul>\n<h4 id=\"实例-1-1\"><a href=\"#实例-1-1\" class=\"headerlink\" title=\"实例 1\"></a>实例 1</h4><p>列出目前目录下的所有文件容量</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# du</span><br><span class=\"line\">8       ./test4     &lt;==每个目录都会列出来</span><br><span class=\"line\">8       ./test2</span><br><span class=\"line\">....中间省略....</span><br><span class=\"line\">12      ./.gconfd   &lt;==包括隐藏文件的目录</span><br><span class=\"line\">220     .           &lt;==这个目录(.)所占用的总量</span><br></pre></td></tr></table></figure>\n<p>直接输入 du 没有加任何选项时，则 du会分析当前所在目录的文件与目录所占用的硬盘空间。</p>\n<h3 id=\"实例-2-1\"><a href=\"#实例-2-1\" class=\"headerlink\" title=\"实例 2\"></a>实例 2</h3><p>将文件的容量也列出来</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# du -a</span><br><span class=\"line\">12      ./install.log.syslog   &lt;==有文件的列表了</span><br><span class=\"line\">8       ./.bash_logout</span><br><span class=\"line\">8       ./test4</span><br><span class=\"line\">8       ./test2</span><br><span class=\"line\">....中间省略....</span><br><span class=\"line\">12      ./.gconfd</span><br><span class=\"line\">220     .</span><br></pre></td></tr></table></figure>\n<h3 id=\"实例-3-1\"><a href=\"#实例-3-1\" class=\"headerlink\" title=\"实例 3\"></a>实例 3</h3><p>检查根目录底下每个目录所占用的容量</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# du -sm /*</span><br><span class=\"line\">7       /bin</span><br><span class=\"line\">6       /boot</span><br><span class=\"line\">.....中间省略....</span><br><span class=\"line\">0       /proc</span><br><span class=\"line\">.....中间省略....</span><br><span class=\"line\">1       /tmp</span><br><span class=\"line\">3859    /usr     &lt;==系统初期最大就是他了啦！</span><br><span class=\"line\">77      /var</span><br></pre></td></tr></table></figure>\n<p>通配符 * 来代表每个目录。</p>\n<p>与 df 不一样的是，du 这个命令其实会直接到文件系统内去搜寻所有的文件数据。</p>\n<h3 id=\"fdisk命令\"><a href=\"#fdisk命令\" class=\"headerlink\" title=\"fdisk命令\"></a>fdisk命令</h3><p>fdisk 是 Linux 的磁盘分区表操作工具。</p>\n<p>语法：</p>\n<p><code>fdisk [-l] 装置名称</code></p>\n<p>选项与参数：</p>\n<ul>\n<li>l ：输出后面接的装置所有的分区内容。若仅有 fdisk -l 时， 则系统将会把整个系统内能够搜寻到的装置的分区均列出来。</li>\n</ul>\n<p>实例 1<br>列出所有分区信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@AY120919111755c246621 tmp]# fdisk -l</span><br><span class=\"line\"></span><br><span class=\"line\">Disk /dev/xvda: 21.5 GB, 21474836480 bytes</span><br><span class=\"line\">255 heads, 63 sectors/track, 2610 cylinders</span><br><span class=\"line\">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class=\"line\">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class=\"line\">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class=\"line\">Disk identifier: 0x00000000</span><br><span class=\"line\"></span><br><span class=\"line\">    Device Boot      Start         End      Blocks   Id  System</span><br><span class=\"line\">/dev/xvda1   *           1        2550    20480000   83  Linux</span><br><span class=\"line\">/dev/xvda2            2550        2611      490496   82  Linux swap / Solaris</span><br><span class=\"line\"></span><br><span class=\"line\">Disk /dev/xvdb: 21.5 GB, 21474836480 bytes</span><br><span class=\"line\">255 heads, 63 sectors/track, 2610 cylinders</span><br><span class=\"line\">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class=\"line\">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class=\"line\">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class=\"line\">Disk identifier: 0x56f40944</span><br><span class=\"line\"></span><br><span class=\"line\">    Device Boot      Start         End      Blocks   Id  System</span><br><span class=\"line\">/dev/xvdb2               1        2610    20964793+  83  Linux</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"磁盘挂载与卸除\"><a href=\"#磁盘挂载与卸除\" class=\"headerlink\" title=\"磁盘挂载与卸除\"></a>磁盘挂载与卸除</h3><p>Linux 的磁盘挂载使用 mount 命令，卸载使用 umount 命令。</p>\n<p>磁盘挂载语法：</p>\n<p><code>mount [-t 文件系统] [-L Label名] [-o 额外选项] [-n]  装置文件名  挂载点</code></p>\n<p>实例 1<br>用默认的方式，将刚刚创建的 &#x2F;dev&#x2F;hdc6 挂载到 &#x2F;mnt&#x2F;hdc6 上面！</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# mkdir /mnt/hdc6</span><br><span class=\"line\">[root@www ~]# mount /dev/hdc6 /mnt/hdc6</span><br><span class=\"line\">[root@www ~]# df</span><br><span class=\"line\">Filesystem           1K-blocks      Used Available Use% Mounted on</span><br><span class=\"line\">.....中间省略.....</span><br><span class=\"line\">/dev/hdc6              1976312     42072   1833836   3% /mnt/hdc6</span><br></pre></td></tr></table></figure>\n<p>磁盘卸载命令 umount 语法：</p>\n<p><code>umount [-fn] 装置文件名或挂载点</code></p>\n<p>选项与参数：</p>\n<ul>\n<li>f ：强制卸除！可用在类似网络文件系统 (NFS) 无法读取到的情况下；</li>\n<li>n ：不升级 &#x2F;etc&#x2F;mtab 情况下卸除。</li>\n</ul>\n<p>卸载&#x2F;dev&#x2F;hdc6</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# umount /dev/hdc6     </span><br></pre></td></tr></table></figure>\n\n\n","more":"\n<p>df：列出文件系统的整体磁盘使用量<br>du：检查磁盘空间使用量<br>fdisk：用于磁盘分区</p>\n<h3 id=\"df\"><a href=\"#df\" class=\"headerlink\" title=\"df\"></a>df</h3><p>Linux磁盘管理好坏直接关系到整个系统的性能问题。</p>\n<p>Linux磁盘管理常用三个命令为df、du和fdisk。</p>\n<ul>\n<li>df：列出文件系统的整体磁盘使用量</li>\n<li>du：检查磁盘空间使用量</li>\n<li>fdisk：用于磁盘分区</li>\n</ul>\n<h3 id=\"df命令\"><a href=\"#df命令\" class=\"headerlink\" title=\"df命令\"></a>df命令</h3><p>df命令参数功能：检查文件系统的磁盘空间占用情况。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息。</p>\n<p>语法：</p>\n<p><code>df [-ahikHTm] [目录或文件名]</code><br>选项与参数：</p>\n<ul>\n<li>a ：列出所有的文件系统，包括系统特有的 &#x2F;proc 等文件系统；</li>\n<li>k ：以 KBytes 的容量显示各文件系统；</li>\n<li>m ：以 MBytes 的容量显示各文件系统；</li>\n<li>h ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；</li>\n<li>H ：以 M&#x3D;1000K 取代 M&#x3D;1024K 的进位方式；</li>\n<li>T ：显示文件系统类型, 连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；</li>\n<li>i ：不用硬盘容量，而以 inode 的数量来显示<h3 id=\"实例-1\"><a href=\"#实例-1\" class=\"headerlink\" title=\"实例 1\"></a>实例 1</h3></li>\n</ul>\n<p>将系统内所有的文件系统列出来！</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# df</span><br><span class=\"line\">Filesystem      1K-blocks      Used Available Use% Mounted on</span><br><span class=\"line\">/dev/hdc2         9920624   3823112   5585444  41% /</span><br><span class=\"line\">/dev/hdc3         4956316    141376   4559108   4% /home</span><br><span class=\"line\">/dev/hdc1          101086     11126     84741  12% /boot</span><br><span class=\"line\">tmpfs              371332         0    371332   0% /dev/shm</span><br></pre></td></tr></table></figure>\n<p>在 Linux 底下如果 df 没有加任何选项，那么默认会将系统内所有的 (不含特殊内存内的文件系统与 swap) 都以 1 Kbytes 的容量来列出来！</p>\n<h4 id=\"实例-2\"><a href=\"#实例-2\" class=\"headerlink\" title=\"实例 2\"></a>实例 2</h4><p>将容量结果以易读的容量格式显示出来</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# df -h</span><br><span class=\"line\">Filesystem            Size  Used Avail Use% Mounted on</span><br><span class=\"line\">/dev/hdc2             9.5G  3.7G  5.4G  41% /</span><br><span class=\"line\">/dev/hdc3             4.8G  139M  4.4G   4% /home</span><br><span class=\"line\">/dev/hdc1              99M   11M   83M  12% /boot</span><br><span class=\"line\">tmpfs                 363M     0  363M   0% /dev/shm</span><br></pre></td></tr></table></figure>\n<h4 id=\"实例-3\"><a href=\"#实例-3\" class=\"headerlink\" title=\"实例 3\"></a>实例 3</h4><p>将系统内的所有特殊文件格式及名称都列出来</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# df -aT</span><br><span class=\"line\">Filesystem    Type 1K-blocks    Used Available Use% Mounted on</span><br><span class=\"line\">/dev/hdc2     ext3   9920624 3823112   5585444  41% /</span><br><span class=\"line\">proc          proc         0       0         0   -  /proc</span><br><span class=\"line\">sysfs        sysfs         0       0         0   -  /sys</span><br><span class=\"line\">devpts      devpts         0       0         0   -  /dev/pts</span><br><span class=\"line\">/dev/hdc3     ext3   4956316  141376   4559108   4% /home</span><br><span class=\"line\">/dev/hdc1     ext3    101086   11126     84741  12% /boot</span><br><span class=\"line\">tmpfs        tmpfs    371332       0    371332   0% /dev/shm</span><br><span class=\"line\">none   binfmt_misc         0       0         0   -  /proc/sys/fs/binfmt_misc</span><br><span class=\"line\">sunrpc  rpc_pipefs         0       0         0   -  /var/lib/nfs/rpc_pipefs</span><br></pre></td></tr></table></figure>\n<h4 id=\"实例-4\"><a href=\"#实例-4\" class=\"headerlink\" title=\"实例 4\"></a>实例 4</h4><p>将 &#x2F;etc 底下的可用的磁盘容量以易读的容量格式显示</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# df -h /etc</span><br><span class=\"line\">Filesystem            Size  Used Avail Use% Mounted on</span><br><span class=\"line\">/dev/hdc2             9.5G  3.7G  5.4G  41% /</span><br></pre></td></tr></table></figure>\n<h3 id=\"du命令\"><a href=\"#du命令\" class=\"headerlink\" title=\"du命令\"></a>du命令</h3><p>Linux du命令也是查看使用空间的，但是与df命令不同的是Linux du命令是对文件和目录磁盘使用的空间的查看，还是和df命令有一些区别的，这里介绍Linux du命令。</p>\n<p>语法：</p>\n<p><code>du [-ahskm] 文件或目录名称</code></p>\n<p>选项与参数：</p>\n<ul>\n<li>a ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。</li>\n<li>h ：以人们较易读的容量格式 (G&#x2F;M) 显示；</li>\n<li>s ：列出总量而已，而不列出每个各别的目录占用容量；</li>\n<li>S ：不包括子目录下的总计，与 -s 有点差别。</li>\n<li>k ：以 KBytes 列出容量显示；</li>\n<li>m ：以 MBytes 列出容量显示；</li>\n</ul>\n<h4 id=\"实例-1-1\"><a href=\"#实例-1-1\" class=\"headerlink\" title=\"实例 1\"></a>实例 1</h4><p>列出目前目录下的所有文件容量</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# du</span><br><span class=\"line\">8       ./test4     &lt;==每个目录都会列出来</span><br><span class=\"line\">8       ./test2</span><br><span class=\"line\">....中间省略....</span><br><span class=\"line\">12      ./.gconfd   &lt;==包括隐藏文件的目录</span><br><span class=\"line\">220     .           &lt;==这个目录(.)所占用的总量</span><br></pre></td></tr></table></figure>\n<p>直接输入 du 没有加任何选项时，则 du会分析当前所在目录的文件与目录所占用的硬盘空间。</p>\n<h3 id=\"实例-2-1\"><a href=\"#实例-2-1\" class=\"headerlink\" title=\"实例 2\"></a>实例 2</h3><p>将文件的容量也列出来</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# du -a</span><br><span class=\"line\">12      ./install.log.syslog   &lt;==有文件的列表了</span><br><span class=\"line\">8       ./.bash_logout</span><br><span class=\"line\">8       ./test4</span><br><span class=\"line\">8       ./test2</span><br><span class=\"line\">....中间省略....</span><br><span class=\"line\">12      ./.gconfd</span><br><span class=\"line\">220     .</span><br></pre></td></tr></table></figure>\n<h3 id=\"实例-3-1\"><a href=\"#实例-3-1\" class=\"headerlink\" title=\"实例 3\"></a>实例 3</h3><p>检查根目录底下每个目录所占用的容量</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# du -sm /*</span><br><span class=\"line\">7       /bin</span><br><span class=\"line\">6       /boot</span><br><span class=\"line\">.....中间省略....</span><br><span class=\"line\">0       /proc</span><br><span class=\"line\">.....中间省略....</span><br><span class=\"line\">1       /tmp</span><br><span class=\"line\">3859    /usr     &lt;==系统初期最大就是他了啦！</span><br><span class=\"line\">77      /var</span><br></pre></td></tr></table></figure>\n<p>通配符 * 来代表每个目录。</p>\n<p>与 df 不一样的是，du 这个命令其实会直接到文件系统内去搜寻所有的文件数据。</p>\n<h3 id=\"fdisk命令\"><a href=\"#fdisk命令\" class=\"headerlink\" title=\"fdisk命令\"></a>fdisk命令</h3><p>fdisk 是 Linux 的磁盘分区表操作工具。</p>\n<p>语法：</p>\n<p><code>fdisk [-l] 装置名称</code></p>\n<p>选项与参数：</p>\n<ul>\n<li>l ：输出后面接的装置所有的分区内容。若仅有 fdisk -l 时， 则系统将会把整个系统内能够搜寻到的装置的分区均列出来。</li>\n</ul>\n<p>实例 1<br>列出所有分区信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@AY120919111755c246621 tmp]# fdisk -l</span><br><span class=\"line\"></span><br><span class=\"line\">Disk /dev/xvda: 21.5 GB, 21474836480 bytes</span><br><span class=\"line\">255 heads, 63 sectors/track, 2610 cylinders</span><br><span class=\"line\">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class=\"line\">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class=\"line\">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class=\"line\">Disk identifier: 0x00000000</span><br><span class=\"line\"></span><br><span class=\"line\">    Device Boot      Start         End      Blocks   Id  System</span><br><span class=\"line\">/dev/xvda1   *           1        2550    20480000   83  Linux</span><br><span class=\"line\">/dev/xvda2            2550        2611      490496   82  Linux swap / Solaris</span><br><span class=\"line\"></span><br><span class=\"line\">Disk /dev/xvdb: 21.5 GB, 21474836480 bytes</span><br><span class=\"line\">255 heads, 63 sectors/track, 2610 cylinders</span><br><span class=\"line\">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class=\"line\">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class=\"line\">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class=\"line\">Disk identifier: 0x56f40944</span><br><span class=\"line\"></span><br><span class=\"line\">    Device Boot      Start         End      Blocks   Id  System</span><br><span class=\"line\">/dev/xvdb2               1        2610    20964793+  83  Linux</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"磁盘挂载与卸除\"><a href=\"#磁盘挂载与卸除\" class=\"headerlink\" title=\"磁盘挂载与卸除\"></a>磁盘挂载与卸除</h3><p>Linux 的磁盘挂载使用 mount 命令，卸载使用 umount 命令。</p>\n<p>磁盘挂载语法：</p>\n<p><code>mount [-t 文件系统] [-L Label名] [-o 额外选项] [-n]  装置文件名  挂载点</code></p>\n<p>实例 1<br>用默认的方式，将刚刚创建的 &#x2F;dev&#x2F;hdc6 挂载到 &#x2F;mnt&#x2F;hdc6 上面！</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# mkdir /mnt/hdc6</span><br><span class=\"line\">[root@www ~]# mount /dev/hdc6 /mnt/hdc6</span><br><span class=\"line\">[root@www ~]# df</span><br><span class=\"line\">Filesystem           1K-blocks      Used Available Use% Mounted on</span><br><span class=\"line\">.....中间省略.....</span><br><span class=\"line\">/dev/hdc6              1976312     42072   1833836   3% /mnt/hdc6</span><br></pre></td></tr></table></figure>\n<p>磁盘卸载命令 umount 语法：</p>\n<p><code>umount [-fn] 装置文件名或挂载点</code></p>\n<p>选项与参数：</p>\n<ul>\n<li>f ：强制卸除！可用在类似网络文件系统 (NFS) 无法读取到的情况下；</li>\n<li>n ：不升级 &#x2F;etc&#x2F;mtab 情况下卸除。</li>\n</ul>\n<p>卸载&#x2F;dev&#x2F;hdc6</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@www ~]# umount /dev/hdc6     </span><br></pre></td></tr></table></figure>\n\n\n","categories":[{"name":"Linux","path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","path":"api/tags/Linux.json"}]}