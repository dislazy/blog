{"title":"公网环境下部署Elasticsearch","slug":"公网环境下部署Elasticsearch","date":"2018-10-14T10:06:14.000Z","updated":"2022-06-02T01:05:59.617Z","comments":true,"path":"api/articles/公网环境下部署Elasticsearch.json","excerpt":"1.下载elasticsearch:curl -L -O https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.4.0/elasticsearch-2.4.0.tar.gz","covers":null,"content":"<p>1.下载elasticsearch:</p>\n<p><code>curl -L -O https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.4.0/elasticsearch-2.4.0.tar.gz</code></p>\n<p>2.解压:</p>\n<p><code>tar -xvf elasticsearch-2.4.0.tar.gz</code></p>\n<p>3.编辑elasticsearch.yml </p>\n<p><code>vi ./config/elasticsearch.yml</code>(此设置每一项之前都必须有空格，否则运行报错，切记切记)</p>\n<p>集群名</p>\n<p><code>cluster.name: elasticsearch</code></p>\n<p>节点名<br><code>node.name: node-1</code></p>\n<p>存储数据和log地址，可以自配，但是需要自建<br><code>path.data: /data/elasticsearch/data</code></p>\n<p><code>path.logs:/data/elasticsearch/logs</code></p>\n<p>开放存储<br><code>bootstrap.mlockall: true</code></p>\n<p><code>Set the bind address to a specific IP (IPv4 or IPv6): network.bind_host: 0.0.0.0</code></p>\n<p><code>network.publish_host: 115.239.210.27</code>（如果是在局域网内配置，三个IP都可以配置成一样的，如果是公网内联机，此项需要配成真实IP地址）</p>\n<p><code>network.host: 0.0.0.0</code></p>\n<p><code>Set a custom port for HTTP: transport.tcp.port: 9300</code></p>\n<p><code>http.port: 9200</code></p>\n<p>集群内联机IP（公网）<br><code>discovery.zen.ping.unicast.hosts: [&quot;0.0.0.0&quot;, &quot;115.239.210.27&quot;]</code></p>\n<p>集群可存活的最小节点，建议设置为1<br><code>discovery.zen.minimum_master_nodes: 1</code></p>\n<p>附：配置项网址<a href=\"http://www.cnblogs.com/hanyouchun/p/5163183.html\">http://www.cnblogs.com/hanyouchun/p/5163183.html</a></p>\n<p>配置文件中给出了三种配置高性能集群拓扑结构的模式,如下：<br>1.如果你想让节点从不选举为主节点,只用来存储数据,可作为负载器</p>\n<p><code>node.master: false</code></p>\n<p><code>node.data: true</code></p>\n<p>2.如果想让节点成为主节点,且不存储任何数据,并保有空闲资源,可作为协调器</p>\n<p><code>node.master: true</code></p>\n<p><code>node.data: false</code></p>\n<p>3.如果想让节点既不称为主节点,又不成为数据节点,那么可将他作为搜索器,从节点中获取数据,生成搜索结果等</p>\n<p><code>node.master: false</code></p>\n<p><code>node.data: false</code></p>\n<p>4.安装插件<code>./bin/plugin install mobz/elasticsearch-head</code></p>\n<p>5.启动</p>\n<p>如果当前是root用户</p>\n<p><code>vi ./bin/elasticsearch</code>将 设置该属性为<code>ES_JAVA_OPTS=&quot;-Des.insecure.allow.root=true&quot;</code></p>\n<p>前台启动（测试是否启动成功）</p>\n<p><code>./bin/elasticsearch -Xms512m -Xmx512m</code></p>\n<p>后台启动</p>\n<p><code>./elasticsearch -d -Xms512m -Xmx512m</code></p>\n<p>6.部署完成，更多的细节需要自己花时间去挖掘</p>\n\n","more":"\n<p>2.解压:</p>\n<p><code>tar -xvf elasticsearch-2.4.0.tar.gz</code></p>\n<p>3.编辑elasticsearch.yml </p>\n<p><code>vi ./config/elasticsearch.yml</code>(此设置每一项之前都必须有空格，否则运行报错，切记切记)</p>\n<p>集群名</p>\n<p><code>cluster.name: elasticsearch</code></p>\n<p>节点名<br><code>node.name: node-1</code></p>\n<p>存储数据和log地址，可以自配，但是需要自建<br><code>path.data: /data/elasticsearch/data</code></p>\n<p><code>path.logs:/data/elasticsearch/logs</code></p>\n<p>开放存储<br><code>bootstrap.mlockall: true</code></p>\n<p><code>Set the bind address to a specific IP (IPv4 or IPv6): network.bind_host: 0.0.0.0</code></p>\n<p><code>network.publish_host: 115.239.210.27</code>（如果是在局域网内配置，三个IP都可以配置成一样的，如果是公网内联机，此项需要配成真实IP地址）</p>\n<p><code>network.host: 0.0.0.0</code></p>\n<p><code>Set a custom port for HTTP: transport.tcp.port: 9300</code></p>\n<p><code>http.port: 9200</code></p>\n<p>集群内联机IP（公网）<br><code>discovery.zen.ping.unicast.hosts: [&quot;0.0.0.0&quot;, &quot;115.239.210.27&quot;]</code></p>\n<p>集群可存活的最小节点，建议设置为1<br><code>discovery.zen.minimum_master_nodes: 1</code></p>\n<p>附：配置项网址<a href=\"http://www.cnblogs.com/hanyouchun/p/5163183.html\">http://www.cnblogs.com/hanyouchun/p/5163183.html</a></p>\n<p>配置文件中给出了三种配置高性能集群拓扑结构的模式,如下：<br>1.如果你想让节点从不选举为主节点,只用来存储数据,可作为负载器</p>\n<p><code>node.master: false</code></p>\n<p><code>node.data: true</code></p>\n<p>2.如果想让节点成为主节点,且不存储任何数据,并保有空闲资源,可作为协调器</p>\n<p><code>node.master: true</code></p>\n<p><code>node.data: false</code></p>\n<p>3.如果想让节点既不称为主节点,又不成为数据节点,那么可将他作为搜索器,从节点中获取数据,生成搜索结果等</p>\n<p><code>node.master: false</code></p>\n<p><code>node.data: false</code></p>\n<p>4.安装插件<code>./bin/plugin install mobz/elasticsearch-head</code></p>\n<p>5.启动</p>\n<p>如果当前是root用户</p>\n<p><code>vi ./bin/elasticsearch</code>将 设置该属性为<code>ES_JAVA_OPTS=&quot;-Des.insecure.allow.root=true&quot;</code></p>\n<p>前台启动（测试是否启动成功）</p>\n<p><code>./bin/elasticsearch -Xms512m -Xmx512m</code></p>\n<p>后台启动</p>\n<p><code>./elasticsearch -d -Xms512m -Xmx512m</code></p>\n<p>6.部署完成，更多的细节需要自己花时间去挖掘</p>\n\n","categories":[{"name":"Linux","path":"api/categories/Linux.json"}],"tags":[{"name":"elasticsearch","path":"api/tags/elasticsearch.json"}]}